# 1_데이터 전처리 : 데이터 생성, 데이터 정제



- 데이터마이닝 : 데이터 -> 패턴 -> 정보 

- 머신러닝 알고리즘 : 데이터 -> 패턴



데이터를 수집하고 관리하는 기술을 비롯한 ICT 기술, 하드웨어 발전과 함께 다양한 학습 알고리즘이 만들어지고 개선된 덕분에 데이터 과학이 발전됨



- 데이터 전처리 과정 : 실제 분석이 들어가는 소요 시간보다 훨씬 많은 시간 및 노력 필요



## 데이터 생성

### 요약변수 vs 파생변수

- 요약변수
  - 수집된 정보를 분석의 목적에 맞게 종합(aggregate)한 변수 
    - 누가 봐도 똑같은 결과가 나올 수 있는 객관적인 원리에 의해서 종합해져야 됨
  - 많은 모델에 공통으로 사용될 수 있어, 재활용성이 높음
  - ex. 단어 빈도, 상품별 구매 금액, 상품별 구매량, 영화 매출액



- 파생변수
  - 특정한 의미를 갖는 작위적 정의에 의한 변수
  - 사용자가 특정 조건을 만족하거나 특정 함수에 의해 값을 만들어 의미를 부여한 변수
  - 매우 주관적일 수 있으므로 논리적 타당성을 갖춰야함
  - ex. 구매상품 다양성 변수, 가격 선호대 변수, 라이프 스타일 변수, 영화 인기도 변수





## 데이터 정제

### 결측값의 이해

- 기록누락, 미응답, 수집오류 등의 이유로 결측이 발생

- 결측값이 포함된 자료라도 나머지 변수의 값들은 의미있는 정보이므로, 정보의 손실을 최소화하도록 결측을 처리하는 것이 바람직함

  ![image-20221028172231268](C:/Users/yes47/AppData/Roaming/Typora/typora-user-images/image-20221028172231268.png)



### 결측값 처리법

- **완전제거법 (list-wise deletion)**
  - 결측값이 하나 이상 포함된 **자료를 제거**하는 방법
  - 정보의 손실로 분석 결과가 왜곡될 수 있음



- **평균대체법 (mean value imputation)**
  - 결측값을 해당 변수의 나머지 값들의 **평균으로 대체**하는 방법
  - 추정량의 표준오차가 과소추정되는 문제가 있음



- **핫덱대체법 (hot deck imputation)**
  - 동일한 데이터 내에서 결측값이 발생한 관찰치와 **유사한 특성을 가진 다른 관찰지의 정보를 이용**하여 대체하는 방법



- 그밖의 결측값 처리법
  - Rgression imputation, KNN imputation 등



### 이상값의 이해

- 이상값은 다른 데이터와 동떨어진 것을 말함
- 다른 자료값들에 비해 멀리 떨어져 있지만 <u>의미가 있는 값일 수도 있고</u>, <u>단순히 입력 오류로 발생한 값</u>일 수도 있음



### 이상값의 탐지

- 상자그림

  - Q1 - 1.5 X IQR 과 Q3 + 1.5 X IQR의 범위를 넘어가는 자료를 이상값으로 진단

    ![image-20221028181020909](C:/Users/yes47/AppData/Roaming/Typora/typora-user-images/image-20221028181020909.png)

    - 1.5배 IQR의 1.5 = tukey 계수
    - tukey계수는 자료에 따라 다른 값을 줄 수 있음
    - (극단치가 너무 많이 존재한다 => tukey 계수를 키워서 판단할 수 있음)



- 표준화 점수(Z-score)
  - 표준화 점수의 절대값이 2, 3보다 큰 경우르 이상값으로 진단



### 이상값 처리 방법

- **이상값 제외 (trimming)**
  - 처리는 간단하지만, 정보 손실이 발생하고 추정량 왜곡이 생길 수 있음



- **이상값 대체(winsorization)**

  - 이상값을 정상값 중 최대 또는 최소 등으로 대체하는 방식

    ![image-20221028181915916](C:/Users/yes47/AppData/Roaming/Typora/typora-user-images/image-20221028181915916.png)

- **변수변환**
  - 자료값 전체에 <u>로그변환, 제곱근 변환</u> 등을 적용



### 연속형 자료의 범주화

- **변수구간화 (binning)**
  - 연속형 변수를 구간을 이용하여 **범주화** 하는 과정



- 변수구간화(binning)의 효과
  - 이상치 문제를 완화
  - 결측치 처리 방법이 될 수 있음
  - 변수간 관계가 단순화 되어 분석 시 과적합을 방지할 수 있고, 결과 해석이 용이해짐





## 문제

**Q1. 다음 중 결측값에 대한 설명 중 적절하지 않은 것은?**

1.  **결측값은 의미없는 값이므로 해당 관찰치의 정보는 일단 제거하는 것이 좋다.** 
2.  결측값이 포함된 변수를 다른 변수로 설명하는 회귀모형을 이용하여 결측값을 예측할 수 있다.

3.  결측값이 포함된 변수에서 결측값이 아닌 나머지 자료값들의 평균 등으로 대체할 수 있다.

4.  결측값이 많은 자료의 경우 분석의 어려움이 따른다.



- 결측값도 의미있는 정보이며, 결측값이 포함된 관찰치의 다른 변수의 값들도 유용한 정보가 될 수 있으므로, 일방적으로 제거하는 것은 바람직하지 않다.



**Q2. 다음 중 이상값으로 진단될 수 있는 경우는 무엇인가?**

1. 표준화 점수가 0인 자료

2. Q1-1.5×IQR보다 큰 자료

3. 표준화 점수가 음수인 자료

4. **Q3+1.5×IQR보다 큰 자료**



- 상자그림에 기반한 방식으로는 Q1-1.5×IQR보다 작거나, Q3+1.5×IQR보다 큰 자료는 이상값으로 진단될 수 있다. 표준화점수는 절대값이 2, 3등보다 크면 이상값으로 진단될 수 있다.



**Q3.  다음 중 파생변수의 사례로 적절하지 않은 것은?**

1. 주요 활동지역

2. 선호 가격대

3. **매장별 판매량**

4. 이벤트 민감도



- 나머지 문항은 사용자가 주관적으로 기준을 정의할 소지가 있는 사안이지만, 매장별 판매량은 수집된 정보를 객관적인 기준에 따라 요약한 변수에 해당한다.