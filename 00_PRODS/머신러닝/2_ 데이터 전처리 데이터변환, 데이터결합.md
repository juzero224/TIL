# 2_ 데이터 전처리: 데이터변환, 데이터결합



- 데이터 변환 : 로그변환, 지수변환, 제곱근변환
- 데이터 결합



## 데이터 변환

### 데이터 변환

- 자료 변환을 통해 자료의 해석을 쉽고 풍부하게 하기 위한 과정

- 데이터 변환 목적

  - 분포의 대칭화
    - 정규가정 하의 모델들을 사용할 수 있음
  - 산포를 비슷하게 하기 위하여

  - 변수 간 관계를 단순하게 하기 위하여



- 변환 유형 1 : 제곱근 변환 vs 제곱 변환

  ![image-20221028182920287](C:/Users/yes47/AppData/Roaming/Typora/typora-user-images/image-20221028182920287.png)

  - 원래 분포가 오른쪽 형태가 긴 형태를 가질 때는 제곱근 유형의 변환을 통해서 대칭화를 할 수 있음
    - 제곱근 유형은 왼쪽으로 당기는 효과
  - 분포의 꼬리가 왼쪽으로 길 때는 제곱유형의 변환을 통해서 오른쪽으로 당겨서 대칭형의 변환을 할 수 있음
  - 원래의 x보다 키워주는 역할 => 제곱 유형을 통해 직선화 할 수 있음
  - y를 낮춰주는 역할 => 제곱근 유형
  - (둘 중 하나만 해야 함)



- 변환 유형 2 : 로그 변환 vs 지수 변환

  ![image-20221028183249492](C:/Users/yes47/AppData/Roaming/Typora/typora-user-images/image-20221028183249492.png)

  - 분포의 오른쪽 꼬리가 길다면 로그형태의 변환을 통해서 왼쪽에서 잡아당겨서 대칭형을 만들 수 있음
  - 분포의 왼쪽 꼬리가 길다면 지수 유형의 Exponential 지수 변환 유형으로 오른쪽으로 당겨서 대칭형을 만듦
  - x를 줄어드는 역할 => x 로그형태 변환
  - y를 늘려주는 역할 => y 지수형태 변환 

![image-20221028183516399](C:/Users/yes47/AppData/Roaming/Typora/typora-user-images/image-20221028183516399.png)





- **박스콕스 변환 (Box-Cox Transform)**

   ![image-20221028183611226](C:/Users/yes47/AppData/Roaming/Typora/typora-user-images/image-20221028183611226.png)

  - 1. x가 0일 때 y도 0을 통과하도록 하는 조건 (0, 0)
  - 2. x가 0인 지점에서 y로 변환될 때 기울기가 1이 되도록 한다 (x = 0, y' = 1)
  - 라는 조건을 만족하도록 파워 변환을 정리한 것

  ![image-20221028184000741](C:/Users/yes47/AppData/Roaming/Typora/typora-user-images/image-20221028184000741.png)



## 데이터 결합

### 데이터 결합

![image-20221028184044413](C:/Users/yes47/AppData/Roaming/Typora/typora-user-images/image-20221028184044413.png)

- 이너조인 (inner join)
  - 두 테이블에 키(key)가 공통으로 존재하는 레코드 (record)만 결합
  - (A, 1, T), (B, 2, F)

- 풀아우터조인 (full outer join)
  - 두 테이블 중 어느 한쪽이라도 존재하는 키에 대한 레코드를 모두 결합
  - (A, 1, T), (B, 2, F), (C, 3, NA), (D, NA, T)

- 레프트 조인 (left join)
  - 왼쪽 테이블에 존재하는 키에 대한 레코드를 결합
  - (A, 1, T), (B, 2, F), (C, 3, NA)
- 라이트 조인 (right join)
  - 오른쪽 테이블에 존재하는 키에 대한 레코드를 결합
  - (A, 1, T), (B, 2, F), (D, NA, T)





## 문제


**Q1. 어느 연속형 변수 X에 관한 히스토그램이 다음과 같이 도출되었다. X의 분포가 종모양의 대칭형이 되도록 하려면 어떤 변환을 하는 것이 적절한가?**

![img](https://webcachecdn.multicampus.com/prd/plm/so/S000040000/S000046000/S000046342/S000046342_IM_91924.png?px-time=1666953840&px-hash=67201f0cf13e16a68f43ec9918db2e29)

1. 지수 변환

2. 세제곱 변환

3. **로그 변환**

4. 제곱 변환



- 분포의 오른 꼬리가 긴 경우에 대칭화를 하기 위해서는 로그 또는 제곱근 유형의 변환을 해야 한다.



**Q2.  어느 두 연속형 변수 X와 Y의 관계가 아래와 같은 비선형 관계라고 하자. 이를 선형 관계로 변환하려면, X 또는 Y에 어떤 변환을 적용하는 것이 적절한가?**

![img](https://webcachecdn.multicampus.com/prd/plm/so/S000040000/S000046000/S000046342/S000046342_IM_91925.png?px-time=1666953841&px-hash=c009cd3b3688189adb4b1dfda5d26df6)

1. X는 변환하지 않음, Y는 제곱 변환

2. X는 변환하지 않음, Y는 지수 변환

3. **X는 변환하지 않음, Y는 로그 변환**

4. X는 로그 변환, Y는 변환하지 않음



- 기울기가 급격히 상승하는 형태이므로, X를 제곱 또는 지수변환을 하거나, Y를 제곱근 또는 로그변환을 하면 선형의 관계를 만들어 줄 수 있다.



**Q3. 다음의 두 테이블을 결합한 결과 (V1='E', V2=NA(결측), V3=False)의 관찰값을 얻었다고 한다. 다음 중 어떤 유형의 결합을 실행한 것으로 볼 수 있나?**

![img](https://webcachecdn.multicampus.com/prd/plm/so/S000040000/S000046000/S000046342/S000046342_IM_91926.png?px-time=1666953841&px-hash=bbfe97e8d87ca1d74d8f64b87ea114e0)

1. 레프트 조인

2. **라이트 조인**

3. 이너 조인

4. 크로스 조인



- V1의 값이 'E'인 경우는 오른쪽 테이블에 있으므로, 라이트 조인 또는 풀 아우터 조인을 수행한 경우만 얻을 수 있다.