## 기술통계

데이터 탐사분석(EDA)

```python
import numpy as np 
import pandas as pd 
import matplotlib.pyplot as plt 
import seaborn as sns
from scipy.stats import chisquare 
from scipy import stats
import scipy as sp 
import statsmodels.api as sm 
from statsmodels.formula.api import ols, logit, glm
```



- 기술통계 >> 요약통계량
  - `df.describe()`
- 첨도(kurtosis)
  - 얼마나 뾰족하게 분포되어 있는가
  - `df.kurtosis()`
- 왜도(skewness)
  - 얼마나 넓게 분포되어 있는가
  - `df.skew()`
  - (+) 왜도 >> 약간 왼쪽으로 첨도가 구성 >> 오른쪽으로 꼬리가 길다



- 명목척도(nominal scale)
  - 범주적으로 구분만 하는 수준의 측정정도
  - '성별'을 측정할 때 남성, 여성
  - '구매장소'를 측정
- 서열척도(ordinal scale)
  - 명목척도에 어느 정도의 서열이 있는 수준의 척도
  - 응답자의 '교육수준' : 중학교 졸업 이하, 고등학교 졸업 , 대학교 졸업 대학원졸업 이상 ...
- 등간척도(interal scales)
  - 서열척도에서 각 측정값 사이에 일정한 간격이 있는 척도
  - 재구매의향 질문할 때 1점 ~ 5점 점수로 측정하는 것
- 비율척도(ratio scale)
  - 등간척도에 절대영점의 속성이 더 추가된 수준의 측정
  - 스마트폰 구매가격을 원으로 측정한 변인
  - 등간척도에서는 재구매의향 변인의 4점이 비율적으로 2점의 2배라고 할 수 없음
  - 비율척도인 구매가격에서는 20만원이 10만원의 2배라고 간주 가능

| 독립변인 --> 종속변인 | 불연속 변인         | 연속변인           |
| --------------------- | ------------------- | ------------------ |
| 불연속 변인           | 교차분석 (카이검정) | t검정, 분산분석    |
| 연속 변인             | 군집분석            | 상관분석, 회귀분석 |

- 명목척도, 서열척도 : 질적/ 불연속/ 분류적 변인
- 등간척도, 비율척도 : 양적/ 연속적/ 수량적 변인

<br>

<br>

## 교차분석(카이제곱 검정)

- 교차분석 : 독립변인과 종속변인이 모두 명목척도 혹은 서열척도로 측정한 불연속 변인일 때 적용
  - 관찰빈도와 기대빈도를 비교하여 카이제곱값(x^2)을 통해 통계적으로 검정
  - 카이제곱값 = 각 집단별 실제의 관찰값에서 원래의 기댓값을 빼고 그 값을 제곱한 후 그것을 기댓값으로 나눈 것들의 총합
  - `E` = 기대빈도 (expected value)
  - C, R = 각각 행, 열에 속한 케이스의 총합
  - N = 케이스의 총합
  - `O` = 관찰빈도 (observed value)

$$
E = \frac{(C*R)}{N}\\ x^2 = \sum \frac{(O-E)^2}{E}
$$

- 교차분석 결과 카이제곱값이 **통계적으로 유의미한 차이가 있는** 것으로 나타난다면 독립변인에 따라 종속변인의 빈도분포가 **통계적으로 차이가 있다**고 간주 >> **Ha (연구가설) 채택**



- 카이제곱검정 python
  - `pd.crosstab()` 
  - `chisquare()` : 카이제곱검정 

```python
# X^2 = sum((O-E)^2 / E ) : 오이를 제곱하면 이가 빠진다. 

pd.crosstab(df['월수입'], df['사용브랜드'])

import numpy as np

fobs = df.월수입
fexp = df.사용브랜드
fexp = fexp * (np.sum(fobs)/np.sum(fexp)) 
chisquare(f_obs=fobs, f_exp=fexp)

# pvalue=9.618060771117479e-05 >> 0.0000961806.....

# 결과해석 
# 카이제곱 분석 결과, 통계량은 343.2642 이며, 유의성 검정 결과, pvalue가 0.00009618 로 
# 0.05보다 작기 때문에 통계적으로 유의하다. 
# 즉, 월수입별 사용브랜드는 차이가 있다. 
# 귀무가설(H0)인 월수입별 사용브랜드는 차이가 없다를 기각하고, 
# 연구가설(Ha)인 월수입별 사용브랜드는 차이가 있다를 채택한다.
```





## t 검정

- t 검정 : 독립변인이 불연속변인이고 종속변인이 연속변인일 때 적용하는데, 독립변인의 집단이 2개일 때만 적용
  - 두 집단의 연속적인 변인의 평균값이 원래 기대했던 것과 실제 관찰된 값 사이의 관계를 통해 검정하는데, 두 집단 간 평균의 차이 대 집단 변화량 사이의 비율
  - 분자 : 표본의 평균과 모집단 평균과의 차이
  - 분모 : 평균에 대한 표준오차의 추정치

$$
t = \frac{두 집단 간 평균차이}{집단의 변화량} =   \frac{ \bar{X_1}  - \bar{X_2}}{^s( \bar{X_1}-\bar{X_2})} \\
$$



### t검정 python

```python
sp.stats.shapiro(mean1) # 삼성(1)에 대해 shapiro 검증을 함 
# shapiro-wilk test on normally distribution test (정규성 검정 테스트)
# https://www.statology.org/shapiro-wilk-test-python/

# 결과해석 
# 샤피로 정규성 검정 결과, 통계량은 0.972 이며, pvalue(=0.0099) < 0.05 으므로 
# 사용브랜드 1(삼성) 통계적으로 유의함. 
# 귀무가설인 '데이터가 정규분포를 따른다'를 기각, '데이터가 정규분포를 따르지 않는다' 채택 
# 정규성 위배 
```



### 레벤(Levene) 검정결과 ***

- 등분산(equal distribution) 가정이 충족되는가를 검정

```python
# 레빈의 등분산 가정(**** 강사직을 걸고...)
sp.stats.levene(mean1, mean2)
# pvalue=0.00030 < 0.05 >>> 등분산 가정 위배 
# 삼성(1), 애플(2) 집단 간 등분산은 같다는 귀무가설을 기각, 
# 따라서, 두 집단은 등분산에 차이가 있다. >>> 등분산 가정 위배
# 등분산 가정을 충족하지 못함
```

```python
stats.ttest_ind(mean1, mean2, equal_var=False)
# ttest_ind : independanct 2 sample t-test (독립적인 두 집단의 평균의 차이 분석)
# 결과 해석 :  통계량 -9.200, pvalue=3.598124628532717e-17 < 0.05 >> 통계적으로 유의미한 차이가 있다
# 결론: 귀무가설 기각, 연구가설 채택 >> 삼성, 애플 구매가격은 차이가 있다.
# 귀무가설(H0): 독립적인 두 집단(삼성, 애플) 평균의 차이가 없다 
# 연구가설(Ha) : 독립적인 두 집단(삼성, 애플) 평균의 차이가 있다
```

```python
sp.stats.levene(mean1, mean2)
# 레빈 등분산성 검정 
# 통계량 0.117,   pvalue=0.7315465812585951 > 0.05 (등분산 가정 충족)
```

```python
stats.ttest_ind(mean1, mean2, equal_var = True)
# 독립적인 두 집단(삼성, 애플)은 등분산 가정을 전제로, 
# 독립 t 검정 결과(ttest_ind), 통계량은 -0.089, 
#  pvalue=0.9290258377820513 > 0.05 
# 통계적으로 유의하지 않음 >> 귀무가설 기각하지 못함 
# 유의한 차이가 없음.
```

